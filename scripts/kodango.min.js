SidebarFollow=function(){this.config={element:null,distanceToTop:0},this.cache={originalToTop:0,prevElement:null,parentToTop:0,placeholder:jQuery("<div>")}},SidebarFollow.prototype={init:function(a){var b,c,d,e,f,g,h;if(this.config=a||this.config,b=this,c=jQuery(b.config.element),!(c.length<=0)){for(d=c.prev();d.is(":hidden")&&(d=d.prev(),!(d.length<=0)););b.cache.prevElement=d,e=c.parent(),f=e.offset().top,g=parseInt(e.css("border-top-width"),10),h=parseInt(e.css("padding-top"),10),b.cache.parentToTop=f+g+h,jQuery(window).scroll(function(){b._scrollScreen({element:c,_self:b})}),jQuery(window).resize(function(){b._scrollScreen({element:c,_self:b})})}},_scrollScreen:function(a){var e,f,g,h,i,b=a._self,c=a.element,d=b.cache.prevElement;c.is(":hidden")||(e=b.config.distanceToTop,f=parseInt(jQuery("body").css("top"),10),isNaN(f)||(e+=f),g=c.offset().top-e,h=0,h=d&&1===d.length?d.offset().top+d.outerHeight():b.cache.parentToTop-e,jQuery(document).scrollTop()>g?(i=c.outerHeight(),b.cache.placeholder.css("height",i).insertBefore(c),b.cache.originalToTop=g,c.css({top:e+"px",position:"fixed"})):(b.cache.originalToTop>g||h>g)&&(b.cache.placeholder.remove(),c.css({position:"static"})))}},jQuery(function(a){a(".backtop").click(function(b){b.preventDefault(),a("html,body").animate({scrollTop:0},"fast")}),a(".tabber-title li").click(function(){var b,c;"selected"!=this.className&&(b=a(this),c=b.parents(".widget-tabber"),b.addClass("selected").siblings().removeClass("selected"),c.find(".tabber-content ul").slideUp("fast").eq(c.find(".tabber-title li").index(this)).slideDown("fast"))}),a("#comments-tabber a").on("click",function(){"curtab"!=this.className&&(a(this).attr("class","curtab").siblings().attr("class","tab"),a("#comments-tabber").nextAll().toggle())}),(new SidebarFollow).init({element:"#sidebar-follow",distanceToTop:15}),a("#mobile-menu").click(function(){var b=a("#header"),c=b.find(".header-menu"),d=b.find(".search-box");d.fadeToggle(),b.hasClass("clicked")?c.slideToggle(function(){b.removeClass("clicked")}):(b.addClass("clicked"),c.slideToggle())}),a("#comments").on("click","#toggle-author",function(){a("#author-info").slideToggle(function(){a(this).is(":hidden")?(a("#welcome-login strong").html(a("#author").val()),a("#toggle-author u").html("更改")):a("#toggle-author u").html("隐藏")})})});
